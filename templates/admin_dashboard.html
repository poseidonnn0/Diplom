<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='admin.css') }}">
    <script defer src="{{ url_for('static', filename='admin.js') }}"></script>
</head>
<body>
    <header class="admin-header">
        <h1 class="admin-title">‚öôÔ∏è –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h1>
        <nav class="admin-nav">
            <a href="/admin/logout" class="logout-btn">–í—ã–π—Ç–∏</a>
        </nav>
    </header>
	
    <main class="admin-main">
        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä–æ–π -->
        <section class="camera-controls">
            <h2 class="section-title">üìπ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–º–µ—Ä—ã</h2>
            <div class="control-group">
                <div class="input-row">
                    <label for="camera-type">–¢–∏–ø –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:</label>
                    <select id="camera-type" class="form-select">
                        <option value="ip">IP-–∫–∞–º–µ—Ä–∞</option>
                        <option value="usb">USB-–∫–∞–º–µ—Ä–∞</option>
                    </select>
                </div>
                <div class="input-row">
                    <label for="camera-url">–ò—Å—Ç–æ—á–Ω–∏–∫:</label>
                    <input 
                        type="text" 
                        id="camera-url" 
                        class="form-input"
                        placeholder="rtsp://login:pass@ip:port/stream"
                        required
                    >
                </div>
                <button id="save-camera-btn" class="btn btn-primary">
                    üîÑ –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
                </button>
            </div>
        </section>

        <!-- –ü—Ä–µ–≤—å—é –≤–∏–¥–µ–æ -->
<section class="video-preview">
    <h2 class="section-title">üé• –ü—Ä—è–º–æ–π —ç—Ñ–∏—Ä</h2>
    <div class="video-wrapper">
        <div id="videoContainer">
            <img src="{{ url_for('video_feed') }}" id="liveFeed" alt="–í–∏–¥–µ–æ–ø–æ—Ç–æ–∫" class="video-stream">
            <div id="videoOverlay" class="video-overlay">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–º–µ—Ä—ã...</div>
        </div>
    </div>
</section>

        <!-- –†–µ–¥–∞–∫—Ç–æ—Ä –∑–æ–Ω -->
        <section class="zone-editor">
            <h2 class="section-title">üó∫Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–æ–Ω–∞–º–∏</h2>
            <div class="zones-container">
                {% for zone in zones %}
                <article class="zone-card">
                    <div class="zone-header">
                        <input 
                            type="text" 
                            value="{{ zone.name }}" 
                            class="zone-name"
                            placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∑–æ–Ω—ã"
                            required
                        >
                        <input 
                            type="color" 
                            value="{{ zone.color }}" 
                            class="zone-color"
                            title="–¶–≤–µ—Ç –∑–æ–Ω—ã"
                        >
                    </div>
                    <div class="zone-body">
                        <div class="input-row">
                            <label>–õ–∏–º–∏—Ç –ª—é–¥–µ–π:</label>
                            <input 
                                type="number" 
                                value="{{ zone.max_capacity }}" 
                                class="zone-limit"
                                min="1"
                                required
                            >
                        </div>
                        <fieldset class="coordinates-editor">
                            <legend>–ì—Ä–∞–Ω–∏—Ü—ã –∑–æ–Ω—ã (px):</legend>
                            <div class="coords-grid">
                                <input type="number" value="{{ zone.coords[0] }}" placeholder="X1" required>
                                <input type="number" value="{{ zone.coords[1] }}" placeholder="Y1" required>
                                <input type="number" value="{{ zone.coords[2] }}" placeholder="X2" required>
                                <input type="number" value="{{ zone.coords[3] }}" placeholder="Y2" required>
                            </div>
                        </fieldset>
                    </div>
                    <div class="zone-footer">
                        <button 
                            class="btn save-zone-btn" 
                            data-zone-index="{{ loop.index0 }}"
                        >
                            üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                        </button>
                    </div>
                </article>
                {% endfor %}
            </div>
        </section>
    </main>
</body>
</html>
